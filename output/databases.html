<!DOCTYPE html>
<html lang="en">
<head>
          <title>code snippets etc.</title>
        <meta charset="utf-8" />




</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="./">code snippets etc. <strong></strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="https://github.com/raoulbia">GitHub</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="./databases.html" rel="bookmark"
         title="Permalink to Databases">Databases</a></h2>
 
  </header>
  <footer class="post-info">
    <abbr class="published" title="2017-11-24T00:00:00+00:00">
      Fri 24 November 2017
    </abbr>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <h3>Postgres</h3>
<h4>install postgres and postgis</h4>
<div class="highlight"><pre><span></span>$  sudo apt install postgis postgresql-13-postgis-3
$ sudo -u postgres psql
<span class="nv">postgres</span><span class="o">=</span><span class="c1"># \password postgres</span>
<span class="nv">postgres</span><span class="o">=</span><span class="c1"># \q</span>
</pre></div>


<p>check installed version(s): <code>dpkg -l | grep postgres</code></p>
<h4>postgres user authentication error</h4>
<p><code>sudo nano /etc/postgresql/13/main/pg_hba.conf</code></p>
<p>CHANGE FROM</p>
<p><code>local   all     postgres     peer</code></p>
<p>TO</p>
<p><code>local   all      postgres    trusted</code></p>
<p>then 
sudo service postgresql restart</p>
<h4>run in pgadmin4</h4>
<p><code>CREATE EXTENSION postgis;</code></p>
<ul>
<li>
<p>http://www.orbital.co.ke:8080/opengeo-docs/dataadmin/pgGettingStarted/shp2pgsql.html</p>
</li>
<li>
<p>test: <code>psql -U postgres -d &lt;DBNAME&gt; -c "SELECT postgis_version()"</code></p>
</li>
<li>
<p>syntax: <code>shp2pgsql -I -s &lt;SRID&gt; &lt;PATH/TO/SHAPEFILE&gt; &lt;SCHEMA&gt;.&lt;DBTABLE&gt; | psql -U postgres -d &lt;DBNAME&gt;</code></p>
</li>
<li>
<p>example: <code>shp2pgsql -I -s 4326  dublinbus/Dublin_Bus.shp  shp_dublinbus | psql -U postgres -d dublinbus</code></p>
</li>
</ul>
<h3>Utilities: ogr2ogr</h3>
<ul>
<li>https://gis.stackexchange.com/questions/65917/can-i-append-to-different-tables-using-ogr2ogr</li>
<li>https://www.bostongis.com/PrinterFriendly.aspx?content_name=ogr_cheatsheet</li>
<li>https://www.mankier.com/1/ogr2ogr</li>
</ul>
<h4>geojson to shp</h4>
<p><code>ogr2ogr -f "ESRI Shapefile" destination_data.shp "dcc_public_bin_locations.geojson"</code></p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>