<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>code snippets etc.</title>
    <link rel="shortcut icon" type="image/png" href="./favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico">
    <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
    <link rel="stylesheet" href="./theme/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="./static/custom-code.css" type="text/css" />
    <meta name="generator" content="Pelican" />
    <meta name="description" content="" />
    <meta name="author" content="" />
</head>
<body>
    <header>
        <nav>
            <ul>
                <li class="selected"><a href="./">Home</a></li>
                <li><a href="./archives">Archives</a></li>
            </ul>
        </nav>
        <div class="header_box">
            <h1><a href="./">code snippets etc.</a></h1>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">            <h4 class="date">Dec 19, 2025</h4>

            <article class="post">
                <h2 class="title">
                    <a href="./dgx_spark_finetuning.html" rel="bookmark" title="Permanent Link to &quot;DGX Spark Fine-tuning&quot;">DGX Spark Fine-tuning</a>
                </h2>

                
                

                <h3>Fine-tuning Options on DGX Spark (GB10, 128GB unified memory)</h3>
<table>
<thead>
<tr>
<th>Option</th>
<th>Framework</th>
<th>Pros</th>
<th>Cons</th>
</tr>
</thead>
<tbody>
<tr>
<td>NeMo + LoRA (current)</td>
<td>NVIDIA NeMo</td>
<td>Official NVIDIA support, optimized for DGX, proven working</td>
<td>Complex setup, container-based</td>
</tr>
<tr>
<td>Unsloth</td>
<td>HuggingFace-based</td>
<td>2x faster, 60% less memory, simple API</td>
<td>Less NVIDIA optimization</td>
</tr>
<tr>
<td>Axolotl</td>
<td>HuggingFace-based</td>
<td>YAML config, many techniques (LoRA, QLoRA, full)</td>
<td>Medium complexity</td>
</tr>
<tr>
<td>HuggingFace PEFT</td>
<td>Transformers</td>
<td>Most popular, huge community</td>
<td>Manual optimization needed</td>
</tr>
<tr>
<td>LLaMA-Factory</td>
<td>HuggingFace-based</td>
<td>Web UI, no-code option</td>
<td>Less control</td>
</tr>
</tbody>
</table>
<h3>GPU Assessment</h3>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Value</th>
<th>Assessment</th>
</tr>
</thead>
<tbody>
<tr>
<td>GPU Util</td>
<td>88%</td>
<td>Good, not bottlenecked</td>
</tr>
<tr>
<td>Temp</td>
<td>68Â°C</td>
<td>Normal</td>
</tr>
<tr>
<td>Power</td>
<td>56W</td>
<td>Moderate</td>
</tr>
</tbody>
</table>
<h3>Speed Factors (not learning rate)</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Current</th>
<th>Could Speed Up?</th>
</tr>
</thead>
<tbody>
<tr>
<td>local_batch_size</td>
<td>1</td>
<td>Increase to 2-4 if memory allows</td>
</tr>
<tr>
<td>global_batch_size</td>
<td>16</td>
<td>Means 16 gradient accumulation steps</td>
</tr>
<tr>
<td>seq_length</td>
<td>2048</td>
<td>Lower if your data is shorter</td>
</tr>
<tr>
<td>Precision</td>
<td>bf16-mixed</td>
<td>Already optimal</td>
</tr>
</tbody>
</table>
<p>88% utilization is solid. The main bottleneck is <code>local_batch_size: 1</code> - you're processing 1 sample at a time with 16 accumulation steps. With 128GB unified memory, you could likely increase to <code>local_batch_size: 2</code> or <code>4</code> to speed things up ~2-4x.</p>
<h3>Misc</h3>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>start<span class="w"> </span>vllm-server
docker<span class="w"> </span>logs<span class="w"> </span>-f<span class="w"> </span>--tail<span class="w"> </span><span class="m">50</span><span class="w"> </span>vllm-server
</code></pre></div>

<h3>SSH Config (~/.ssh/config)</h3>
<div class="highlight"><pre><span></span><code>Host dgx-spark
    HostName 192.168.1.xx
    User &lt;user-name&gt;
    IdentityFile ~/.ssh/&lt;name-of-pub-ssh-key&gt;
    IdentitiesOnly yes
    LocalForward 8000 localhost:8000
    LocalForward 11434 localhost:11434
</code></pre></div>

<h3>SSH Tunnel</h3>
<div class="highlight"><pre><span></span><code>ssh<span class="w"> </span>-N<span class="w"> </span>-L<span class="w"> </span><span class="m">8000</span>:localhost:8000<span class="w"> </span>-L<span class="w"> </span><span class="m">12434</span>:localhost:12434<span class="w"> </span>user@spark-e123.local
</code></pre></div>

<h3>Example Roo Code configuration for vLLM</h3>
<ul>
<li>API Provider: <code>OpenAI Compatible</code></li>
<li>Base URL: <code>http://localhost:8000/v1</code></li>
<li>API Key: <code>not-required</code></li>
<li>Model: <code>Qwen/Qwen2.5-Coder-14B-Instruct</code></li>
</ul>
                <div class="clear"></div>

                <div class="info">
                    <a href="./dgx_spark_finetuning.html">posted at 00:00</a>
                    &nbsp;&middot;&nbsp;<a href="./category/ai.html" rel="tag">AI</a>
                </div>
            </article>            <h4 class="date">Nov 09, 2025</h4>

            <article class="post">
                <h2 class="title">
                    <a href="./ai_prompts_claude_code.html" rel="bookmark" title="Permanent Link to &quot;AI Prompts - Claude Code&quot;">AI Prompts - Claude Code</a>
                </h2>

                
                

                <h3>What is Claude.md?</h3>
<p>Claude.md is your AI team member's persistent memory - essential context available in every prompt. Like onboarding a new developer, you provide Claude Code with institutional knowledge to work effectively.</p>
<h3>The CONTEXT Framework for Claude.md</h3>
<table>
<thead>
<tr>
<th>Letter</th>
<th>Principle</th>
</tr>
</thead>
<tbody>
<tr>
<td>C</td>
<td>Clear and Concise Instructions</td>
</tr>
<tr>
<td>O</td>
<td>Operational Processes</td>
</tr>
<tr>
<td>N</td>
<td>Naming and Standards</td>
</tr>
<tr>
<td>T</td>
<td>Testing and Quality Gates</td>
</tr>
<tr>
<td>E</td>
<td>Examples and References</td>
</tr>
<tr>
<td>X</td>
<td>Expectations and Boundaries</td>
</tr>
<tr>
<td>T</td>
<td>Tools and Dependencies</td>
</tr>
</tbody>
</table>
<h3>Core Principles</h3>
<p><strong>Essential Information Only</strong> - Global information that applies to every task. Don't overwhelm with project-specific details.</p>
<p><strong>Specificity Creates Better Targets</strong> - "Write solid code" is vague; "Follow SOLID design principles for all object-oriented code" is actionable.</p>
<p><strong>Process Over Micromanagement</strong> - Define workflows and checks, not implementation details.</p>
<h3>Claude.md Best Practices</h3>
<p><strong>Do's:</strong>
- Use clear, actionable language
- Provide specific tools and frameworks
- Define quality gates and testing requirements
- Include workflow processes
- Specify naming conventions</p>
<p><strong>Don'ts:</strong>
- Include task-specific details that only apply sometimes
- Write 1000-page documentation dumps
- Use vague instructions like "write good code"
- Micromanage implementation details</p>
<h3>Claude.md Example</h3>
<div class="highlight"><pre><span></span><code># Project: TaskFlow Web Application

## Core Principles
IMPORTANT: All code MUST follow SOLID design principles.

## Development Workflow
1. Create and checkout feature branch: feature-[brief-description]
2. Write comprehensive tests for all new functionality
3. Compile code and run all tests before committing
4. Write detailed commit messages explaining changes
5. Commit all changes to the feature branch

## Architecture Overview
- Frontend: Next.js 14 with TypeScript and Tailwind CSS
- State Management: Zustand for client state, React Query for server state
- Backend: Node.js with Express and Prisma ORM
- Database: PostgreSQL
- Testing: Jest for unit tests, Playwright for E2E

## Quality Gates
- All code must compile without warnings
- Test coverage must remain above 80%
- All tests must pass before committing
- ESLint and Prettier must pass without errors
</code></pre></div>

<hr>
<h2>Creating Claude Commands</h2>
<p>Commands deliver targeted context for specific, repeatable tasks. They're specialized instruction sets stored in <code>.claude/commands/</code> directory.</p>
<h3>The TARGETED Framework</h3>
<table>
<thead>
<tr>
<th>Letter</th>
<th>Principle</th>
</tr>
</thead>
<tbody>
<tr>
<td>T</td>
<td>Task-Specific Instructions</td>
</tr>
<tr>
<td>A</td>
<td>Arguments and Placeholders</td>
</tr>
<tr>
<td>R</td>
<td>Reusable Process Steps</td>
</tr>
<tr>
<td>G</td>
<td>Guided Examples and References</td>
</tr>
<tr>
<td>E</td>
<td>Explicit Output Requirements</td>
</tr>
<tr>
<td>T</td>
<td>Template-Based Naming</td>
</tr>
<tr>
<td>E</td>
<td>Error Handling and Edge Cases</td>
</tr>
<tr>
<td>D</td>
<td>Documentation and Context</td>
</tr>
</tbody>
</table>
<h3>Command Location</h3>
<ul>
<li><strong>Project-specific</strong>: <code>.claude/commands/</code> (versioned with project)</li>
<li><strong>Global commands</strong>: <code>~/.claude/commands/</code> (available across all projects)</li>
</ul>
<h3>Organization Strategies</h3>
<ul>
<li><strong>By Function</strong>: <code>plan-feature.md</code>, <code>impl-api.md</code>, <code>test-unit.md</code></li>
<li><strong>By Domain</strong>: <code>auth-login.md</code>, <code>user-profile.md</code>, <code>payment-process.md</code></li>
<li><strong>By Role</strong>: <code>dev-review.md</code>, <code>qa-automation.md</code>, <code>ops-deploy.md</code></li>
</ul>
<hr>
<h2>Example Commands</h2>
<h3>Code Review Command</h3>
<p>File: <code>.claude/commands/code-review.md</code></p>
<div class="highlight"><pre><span></span><code># Code Review Command

Carefully perform a comprehensive code review of $ARGUMENTS.

## Review Standards
Examples of excellent code to match:
- src/components/UserProfile/UserProfile.tsx (React components)
- src/utils/dataValidation.ts (utility functions)
- src/hooks/useUserData.ts (custom hooks)

## Process
1. Read example files to understand patterns and conventions
2. Analyze $ARGUMENTS against these standards
3. Create detailed critique covering:
   - Code structure and organization
   - Adherence to established patterns
   - Performance considerations
   - Security implications
   - Test coverage gaps

## Output Requirements
- Save review as ai-code-reviews/{filename}.review.md
- Include specific line references for issues
- Rate quality: Excellent/Good/Needs Improvement/Poor
- Estimate refactoring effort: Low/Medium/High
</code></pre></div>

<h3>Parallel Work Command</h3>
<p>File: <code>.claude/commands/parallel-work.md</code></p>
<div class="highlight"><pre><span></span><code>I want to develop features in parallel using Git worktrees: $ARGUMENTS

Think about how to divide the work into separate features.

Please help me set up the worktree environment:
1. For each feature, create worktree at ../project-[feature-name]
   with branch feature/[feature-name]
2. Set up development environment in each worktree
3. List all worktrees to confirm creation
4. Explain what each worktree contains and how they&#39;re isolated

I want to work on all features simultaneously without conflicts.
</code></pre></div>

<p>Usage: <code>/parallel-work budget-tracking notifications user-settings</code></p>
<h3>Integrate Parallel Work Command</h3>
<p>File: <code>.claude/commands/integrate-parallel-work.md</code></p>
<div class="highlight"><pre><span></span><code>I have features developed in parallel worktrees to integrate: $ARGUMENTS

Please help me integrate these features:
1. Create integration branch: integration/parallel-features
2. For each feature, merge branch feature/[feature-name]
3. Resolve any merge conflicts
4. Test that all features work together
5. Run all tests to ensure nothing is broken
6. Once successful, merge to main and clean up branches

I want to integrate safely before merging to main.
</code></pre></div>

<p>Usage: <code>/integrate-parallel-work budget-tracking notifications user-settings</code></p>
<h3>API Test Command</h3>
<p>File: <code>.claude/commands/api-test.md</code></p>
<div class="highlight"><pre><span></span><code># API Testing Command

Create comprehensive API tests for: $ARGUMENTS

## Testing Strategy

1. Happy Path Testing:
   - Valid request formats
   - Expected response structures
   - Proper HTTP status codes

2. Error Handling Testing:
   - Invalid request payloads
   - Authentication failures
   - Rate limiting scenarios

3. Edge Cases:
   - Boundary value testing
   - Large payload handling
   - Concurrent request handling

## Test Structure
Create tests in /tests/api/{endpoint-name}.test.ts
</code></pre></div>
                <div class="clear"></div>

                <div class="info">
                    <a href="./ai_prompts_claude_code.html">posted at 00:00</a>
                    &nbsp;&middot;&nbsp;<a href="./category/ai.html" rel="tag">AI</a>
                </div>
            </article>

                <div class="clear"></div>
                <div class="pages">


                    <a href="./index2.html" class="next_page">Next&nbsp;&rarr;</a>

                    <span>Page 1 of 35</span>
                </div>

            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/jody-frankowski/blue-penguin">Blue Penguin</a> Theme
                &middot;
                Powered by <a href="http://getpelican.com">Pelican</a>
            </footer>
        </div>
        <div class="clear"></div>
    </div>
<script>
// Add copy buttons to all code blocks
document.addEventListener('DOMContentLoaded', function() {
    var copyIcon = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>';
    var checkIcon = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>';

    document.querySelectorAll('pre').forEach(function(pre) {
        // Avoid duplicate buttons
        if (pre.querySelector('.copy-btn')) return;
        var btn = document.createElement('button');
        btn.className = 'copy-btn';
        btn.type = 'button';
        btn.innerHTML = copyIcon;
        btn.title = 'Copy to clipboard';
        btn.onclick = function() {
            var code = pre.querySelector('code');
            if (code) {
                var text = code.innerText;
                navigator.clipboard.writeText(text).then(function() {
                    btn.innerHTML = checkIcon;
                    setTimeout(function() { btn.innerHTML = copyIcon; }, 1200);
                });
            }
        };
        pre.appendChild(btn);
        pre.style.position = 'relative';
    });
});
</script>
</body>
</html>